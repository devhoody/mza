<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.matzalal.web.repository.RestDetailViewRepository">


    <select id="findById" resultType="RestDetailView">
        select
        r.rest_id,
        r.rest_name,
        r.plain_business_bgn_hours,
        r.plain_business_end_hours,
        r.end_business_bgn_hours,
        r.end_business_end_hours,
        r.addr,
        lr.location_rest_id,
        lr.area,
        r.phone,
        r.menu_id,
        rv.rating,
        r.banner_img,
        r.img1, r.img2, r.img3,
        cr.celeb_id,
        c.name,
        r.admin_id
        from restaurant r
        left join rating_view rv on r.rest_id = rv.rest_id
        left join location_rest lr on r.location_rest_id = lr.location_rest_id
        left join celeb_restaurant cr on r.celeb_rest_id = cr.celeb_rest_id
        left join celeb c on cr.celeb_id = c.celeb_id
        where r.rest_id=#{restId}
    </select>


</mapper>